using System;
using System.Collections.Generic;
using Rewired;
using Rewired.Config;
using Rewired.Data.Mapping;
using Rewired.Interfaces;
using Rewired.Utils;
using UnityEngine;

internal class XDeDuePBuHGGFsspnAzWcBdsCZTB : IDisposable, IUnifiedMouseSource
{
	private class RoCRJTuNbiwgmxLQvuZMdDpIZVa
	{
		private enum ETupOeQpeRlMPtENEuzGkpSqPws
		{
			HRwhOziqklijDWtMBlqDBzEDePP = 0,
			PtmzwbWJMjlItMPMbSdtIbhDUhv = 1,
			knedCXyjRFMRrbiLFBVjfsQvMRO = 2
		}

		private const int elxkPoAzHhjBAgsAzfRiamkVlwZ = 120;

		private const int OhzXZAKnrpolrhMfgsdPHISxrE = 2048;

		public readonly UpdateLoopType iWjEHYioHkUQEUDdwzaMtFztafj;

		public uint EUJQZNWjSwJsYMlDEyuQHKwSPST;

		public uint dRlKolLFRTDGBpGJleoNyVEFiPp;

		public yqIcLiinOcsRJjpdQKrjkkDLiOmY DKdFnrWTiTilBRcDHsyRICvPlGy;

		public float fdcCcwdHpvxPYBpcdbZdtoGFAzzB;

		public float ZVnCDqHFiPtAfFwySHfFJzLdSYpt;

		public float zCfIWDgJNJHhtfCuBzwTpCZFcov;

		public float KAsehNibUAMzWWkrGMFNagXczit;

		private bool[] jYpFNafrKewgWVUhMLEYAHngxQgt;

		private bool[] YxjKESsJoLbtdZlViRYJgbJcRcM;

		private mLuLrAZMjBYyItYPrKQXwKbpTqb NMqFElLwMmIyMxaViaLtiFaOcndI;

		private uint tYNiisVGAUJVJLIultlWNLNAPas;

		private int tCnypWaspbKZeFfmdRpdPXDLvTz;

		private int pfMetVzlQbYHEQQNtibPeRixbYf;

		private bool RWICPzJPknJyllfVmQoscCdfUCn;

		public RoCRJTuNbiwgmxLQvuZMdDpIZVa(mLuLrAZMjBYyItYPrKQXwKbpTqb windowsPrefs, UpdateLoopType updateLoop)
		{
			NMqFElLwMmIyMxaViaLtiFaOcndI = windowsPrefs;
			iWjEHYioHkUQEUDdwzaMtFztafj = updateLoop;
			jYpFNafrKewgWVUhMLEYAHngxQgt = new bool[5];
			YxjKESsJoLbtdZlViRYJgbJcRcM = new bool[5];
		}

		public void NWlacreQZdPelbINrpysXKCfkWG(MYwKmedBLcNvIZZHCnRMIWoJnsa P_0)
		{
			bDzedzKrgbdlGWNbpRHVoANyjxi bDzedzKrgbdlGWNbpRHVoANyjxi2 = P_0.ZODcQljPqTlXcsMxFCytFTLRPOc;
			if (bDzedzKrgbdlGWNbpRHVoANyjxi2 != 0)
			{
				if ((bDzedzKrgbdlGWNbpRHVoANyjxi2 & bDzedzKrgbdlGWNbpRHVoANyjxi.hcgUZDUcoqGwIhUzAtVbYrqKDEHj) != 0 || (bDzedzKrgbdlGWNbpRHVoANyjxi2 & bDzedzKrgbdlGWNbpRHVoANyjxi.DUyIAQkVGLxBWWqMrduMQjbzREN) != 0)
				{
					IntPtr intPtr = FzngAIhKGFOAkXUDRNTZlbDTVEc.NPKxqbrJOXBOjYozsbheDTjQCapS();
					if (FzngAIhKGFOAkXUDRNTZlbDTVEc.WTNNozXbCzvAANAuXXjpSeDaTAD() == intPtr && EutzNJwcIAcKwcTnjDTrfMqIYlsY(intPtr))
					{
						bDzedzKrgbdlGWNbpRHVoANyjxi2 &= ~bDzedzKrgbdlGWNbpRHVoANyjxi.hcgUZDUcoqGwIhUzAtVbYrqKDEHj;
						bDzedzKrgbdlGWNbpRHVoANyjxi2 &= ~bDzedzKrgbdlGWNbpRHVoANyjxi.DUyIAQkVGLxBWWqMrduMQjbzREN;
					}
				}
				int num = (int)bDzedzKrgbdlGWNbpRHVoANyjxi2;
				if (NMqFElLwMmIyMxaViaLtiFaOcndI.VNivDJsgTJIPJyuRbhgsbHlZHTe && NMqFElLwMmIyMxaViaLtiFaOcndI.ylYNlIRcDzAiHAHXfLpZuEixdDAj)
				{
					ObdJXjPkEqyEKeyjyUPGUmiQEmE(1, num, 1, 2);
					ObdJXjPkEqyEKeyjyUPGUmiQEmE(0, num, 4, 8);
				}
				else
				{
					ObdJXjPkEqyEKeyjyUPGUmiQEmE(0, num, 1, 2);
					ObdJXjPkEqyEKeyjyUPGUmiQEmE(1, num, 4, 8);
				}
				ObdJXjPkEqyEKeyjyUPGUmiQEmE(2, num, 16, 32);
				ObdJXjPkEqyEKeyjyUPGUmiQEmE(3, num, 64, 128);
				ObdJXjPkEqyEKeyjyUPGUmiQEmE(4, num, 256, 512);
			}
			EUJQZNWjSwJsYMlDEyuQHKwSPST = P_0.EUJQZNWjSwJsYMlDEyuQHKwSPST;
			dRlKolLFRTDGBpGJleoNyVEFiPp = P_0.dRlKolLFRTDGBpGJleoNyVEFiPp;
			yqIcLiinOcsRJjpdQKrjkkDLiOmY dKdFnrWTiTilBRcDHsyRICvPlGy = DKdFnrWTiTilBRcDHsyRICvPlGy;
			DKdFnrWTiTilBRcDHsyRICvPlGy = P_0.DKdFnrWTiTilBRcDHsyRICvPlGy;
			if (DKdFnrWTiTilBRcDHsyRICvPlGy != dKdFnrWTiTilBRcDHsyRICvPlGy)
			{
				RWICPzJPknJyllfVmQoscCdfUCn = false;
			}
			if (DKdFnrWTiTilBRcDHsyRICvPlGy == yqIcLiinOcsRJjpdQKrjkkDLiOmY.payOlkfwPsHlHsHULRoSfXqkLwy)
			{
				fdcCcwdHpvxPYBpcdbZdtoGFAzzB += (float)P_0.fdcCcwdHpvxPYBpcdbZdtoGFAzzB * 0.5f;
				ZVnCDqHFiPtAfFwySHfFJzLdSYpt += (float)P_0.ZVnCDqHFiPtAfFwySHfFJzLdSYpt * 0.5f * -1f;
			}
			else if ((DKdFnrWTiTilBRcDHsyRICvPlGy & yqIcLiinOcsRJjpdQKrjkkDLiOmY.aRXTCIDvxPlPLOtyNFPdHWbAWya) != 0)
			{
				bool flag = (DKdFnrWTiTilBRcDHsyRICvPlGy & yqIcLiinOcsRJjpdQKrjkkDLiOmY.sGNZWxLyeEEAvGTVHdbRmsihIyo) != 0;
				int num2 = FzngAIhKGFOAkXUDRNTZlbDTVEc.aFBzZPIgseVWaecAIaECHLpqHh(flag ? VEdhoLaqZqTiAlYgElsfdGsPTuKQ.HSdegYiNbXvmsjSNzusKVjPZGpp : VEdhoLaqZqTiAlYgElsfdGsPTuKQ.FMBxAZtCdgatAZTKaFopebUusJC);
				int num3 = FzngAIhKGFOAkXUDRNTZlbDTVEc.aFBzZPIgseVWaecAIaECHLpqHh(flag ? VEdhoLaqZqTiAlYgElsfdGsPTuKQ.TkihyZMKpNkBMpijgRLKNsOStuz : VEdhoLaqZqTiAlYgElsfdGsPTuKQ.bMafWsnBinESkKGaoHqFMdWVqczT);
				int num4 = (int)((float)P_0.fdcCcwdHpvxPYBpcdbZdtoGFAzzB / 65535f * (float)num2);
				int num5 = (int)((65535f - (float)P_0.ZVnCDqHFiPtAfFwySHfFJzLdSYpt) / 65535f * (float)num3);
				if (!RWICPzJPknJyllfVmQoscCdfUCn)
				{
					tCnypWaspbKZeFfmdRpdPXDLvTz = num4;
					pfMetVzlQbYHEQQNtibPeRixbYf = num5;
					RWICPzJPknJyllfVmQoscCdfUCn = true;
				}
				fdcCcwdHpvxPYBpcdbZdtoGFAzzB += num4 - tCnypWaspbKZeFfmdRpdPXDLvTz;
				ZVnCDqHFiPtAfFwySHfFJzLdSYpt += num5 - pfMetVzlQbYHEQQNtibPeRixbYf;
				tCnypWaspbKZeFfmdRpdPXDLvTz = num4;
				pfMetVzlQbYHEQQNtibPeRixbYf = num5;
			}
			else
			{
				fdcCcwdHpvxPYBpcdbZdtoGFAzzB = P_0.fdcCcwdHpvxPYBpcdbZdtoGFAzzB;
				ZVnCDqHFiPtAfFwySHfFJzLdSYpt = P_0.ZVnCDqHFiPtAfFwySHfFJzLdSYpt;
			}
			if (P_0.rjGGmhYcndFvNTsclDyuPcPdVms != 0)
			{
				int num6 = ((MathTools.Abs(P_0.rjGGmhYcndFvNTsclDyuPcPdVms) < 120) ? MathTools.Sign(P_0.rjGGmhYcndFvNTsclDyuPcPdVms) : (P_0.rjGGmhYcndFvNTsclDyuPcPdVms / 120));
				if ((bDzedzKrgbdlGWNbpRHVoANyjxi2 & bDzedzKrgbdlGWNbpRHVoANyjxi.VsmFvVmWmoAJfIpJXIpaPkoloUGb) != 0)
				{
					zCfIWDgJNJHhtfCuBzwTpCZFcov += num6;
				}
				else if ((bDzedzKrgbdlGWNbpRHVoANyjxi2 & (bDzedzKrgbdlGWNbpRHVoANyjxi)2048) != 0)
				{
					KAsehNibUAMzWWkrGMFNagXczit += num6;
				}
			}
		}

		public void AqSHUwrsGAehycDXTjkPSOPFauPD(ControllerDataUpdater P_0)
		{
			float[] axisValues = P_0.axisValues;
			axisValues[0] = fdcCcwdHpvxPYBpcdbZdtoGFAzzB;
			axisValues[1] = ZVnCDqHFiPtAfFwySHfFJzLdSYpt;
			axisValues[2] = zCfIWDgJNJHhtfCuBzwTpCZFcov;
			axisValues[3] = KAsehNibUAMzWWkrGMFNagXczit;
			bool[] buttonValues = P_0.buttonValues;
			for (int i = 0; i < 5; i++)
			{
				buttonValues[i] = jYpFNafrKewgWVUhMLEYAHngxQgt[i] || YxjKESsJoLbtdZlViRYJgbJcRcM[i];
			}
			tANYPPmjmFRGWnDkeBsNpdYspJd();
		}

		public void aWoeUUEECkNImBpxjMjDHgymWpn()
		{
			tANYPPmjmFRGWnDkeBsNpdYspJd();
		}

		private void tANYPPmjmFRGWnDkeBsNpdYspJd()
		{
			if (tYNiisVGAUJVJLIultlWNLNAPas != ReInput.absFrame)
			{
				XbSFMNDXmTMOXsWDUqUGHdINhla();
				tYNiisVGAUJVJLIultlWNLNAPas = ReInput.absFrame;
			}
		}

		public void OeUrnnZKFEfcUxLGqEbSdcenXWX()
		{
			fdcCcwdHpvxPYBpcdbZdtoGFAzzB = 0f;
			ZVnCDqHFiPtAfFwySHfFJzLdSYpt = 0f;
			dRlKolLFRTDGBpGJleoNyVEFiPp = 0u;
			DKdFnrWTiTilBRcDHsyRICvPlGy = yqIcLiinOcsRJjpdQKrjkkDLiOmY.payOlkfwPsHlHsHULRoSfXqkLwy;
			zCfIWDgJNJHhtfCuBzwTpCZFcov = 0f;
			KAsehNibUAMzWWkrGMFNagXczit = 0f;
			Array.Clear(jYpFNafrKewgWVUhMLEYAHngxQgt, 0, 5);
			Array.Clear(YxjKESsJoLbtdZlViRYJgbJcRcM, 0, 5);
			RWICPzJPknJyllfVmQoscCdfUCn = false;
		}

		public void XbSFMNDXmTMOXsWDUqUGHdINhla()
		{
			fdcCcwdHpvxPYBpcdbZdtoGFAzzB = 0f;
			ZVnCDqHFiPtAfFwySHfFJzLdSYpt = 0f;
			zCfIWDgJNJHhtfCuBzwTpCZFcov = 0f;
			KAsehNibUAMzWWkrGMFNagXczit = 0f;
			Array.Clear(YxjKESsJoLbtdZlViRYJgbJcRcM, 0, 5);
		}

		private bool kXRepGCTsYPuBnCuTSPcGaXqgpDv(int P_0, int P_1, int P_2)
		{
			if ((P_0 & P_1) == P_1 && (P_0 & P_2) != P_2)
			{
				return true;
			}
			return false;
		}

		private ETupOeQpeRlMPtENEuzGkpSqPws bhpoYSjYyRuohpNyztEGrxTTBGo(int P_0, int P_1, int P_2)
		{
			if ((P_0 & P_1) == P_1)
			{
				if ((P_0 & P_2) == P_2)
				{
					return ETupOeQpeRlMPtENEuzGkpSqPws.HRwhOziqklijDWtMBlqDBzEDePP;
				}
				return ETupOeQpeRlMPtENEuzGkpSqPws.PtmzwbWJMjlItMPMbSdtIbhDUhv;
			}
			if ((P_0 & P_2) == P_2)
			{
				return ETupOeQpeRlMPtENEuzGkpSqPws.knedCXyjRFMRrbiLFBVjfsQvMRO;
			}
			return ETupOeQpeRlMPtENEuzGkpSqPws.HRwhOziqklijDWtMBlqDBzEDePP;
		}

		private void ObdJXjPkEqyEKeyjyUPGUmiQEmE(int P_0, int P_1, int P_2, int P_3)
		{
			ETupOeQpeRlMPtENEuzGkpSqPws eTupOeQpeRlMPtENEuzGkpSqPws = bhpoYSjYyRuohpNyztEGrxTTBGo(P_1, P_2, P_3);
			if (jYpFNafrKewgWVUhMLEYAHngxQgt[P_0])
			{
				if (eTupOeQpeRlMPtENEuzGkpSqPws == ETupOeQpeRlMPtENEuzGkpSqPws.knedCXyjRFMRrbiLFBVjfsQvMRO)
				{
					jYpFNafrKewgWVUhMLEYAHngxQgt[P_0] = false;
				}
			}
			else if (eTupOeQpeRlMPtENEuzGkpSqPws == ETupOeQpeRlMPtENEuzGkpSqPws.PtmzwbWJMjlItMPMbSdtIbhDUhv)
			{
				jYpFNafrKewgWVUhMLEYAHngxQgt[P_0] = true;
			}
			if (eTupOeQpeRlMPtENEuzGkpSqPws == ETupOeQpeRlMPtENEuzGkpSqPws.PtmzwbWJMjlItMPMbSdtIbhDUhv)
			{
				YxjKESsJoLbtdZlViRYJgbJcRcM[P_0] = true;
			}
		}

		private static bool EutzNJwcIAcKwcTnjDTrfMqIYlsY(IntPtr P_0)
		{
			IntPtr intPtr = FzngAIhKGFOAkXUDRNTZlbDTVEc.USWxMSLIUUbqtzIvJJcbhDpqilg(0u, false, 0u);
			if (intPtr == IntPtr.Zero)
			{
				return false;
			}
			if (!FzngAIhKGFOAkXUDRNTZlbDTVEc.VNKqqQwsYKDUaulPSduSirDpFCnv(P_0, out var jOkaserkmLOgCqlToLOALRPlsGZ2))
			{
				return false;
			}
			if (!FzngAIhKGFOAkXUDRNTZlbDTVEc.RSIBooKdgCMrRNSZOgApHEwLSWIo(out var jOkaserkmLOgCqlToLOALRPlsGZ3))
			{
				return false;
			}
			if (!FzngAIhKGFOAkXUDRNTZlbDTVEc.yHOMOiJTmZDhvHDrPXQqzdOTuHe(P_0, out var sOfnIWrJUVZLKGwjbMVYbxQURhm))
			{
				return false;
			}
			int num = jOkaserkmLOgCqlToLOALRPlsGZ3.fdcCcwdHpvxPYBpcdbZdtoGFAzzB - jOkaserkmLOgCqlToLOALRPlsGZ2.fdcCcwdHpvxPYBpcdbZdtoGFAzzB;
			int num2 = jOkaserkmLOgCqlToLOALRPlsGZ3.ZVnCDqHFiPtAfFwySHfFJzLdSYpt - jOkaserkmLOgCqlToLOALRPlsGZ2.ZVnCDqHFiPtAfFwySHfFJzLdSYpt;
			if (num >= 0 && num2 >= 0 && num <= sOfnIWrJUVZLKGwjbMVYbxQURhm.xinqHxneXziXXJUToqdXCDXfZwq && num2 <= sOfnIWrJUVZLKGwjbMVYbxQURhm.zpAMXPEwDJqbsIfMfXKdCsftqNb)
			{
				return false;
			}
			if (!FzngAIhKGFOAkXUDRNTZlbDTVEc.AUaAEJazBrgIIyGeaiNSwDSIDMnh(P_0, out var sOfnIWrJUVZLKGwjbMVYbxQURhm2))
			{
				return false;
			}
			if (jOkaserkmLOgCqlToLOALRPlsGZ3.fdcCcwdHpvxPYBpcdbZdtoGFAzzB >= sOfnIWrJUVZLKGwjbMVYbxQURhm2.gfyCGmowVUKBuPmydiiwhLbVfTxF && jOkaserkmLOgCqlToLOALRPlsGZ3.fdcCcwdHpvxPYBpcdbZdtoGFAzzB <= sOfnIWrJUVZLKGwjbMVYbxQURhm2.xinqHxneXziXXJUToqdXCDXfZwq && jOkaserkmLOgCqlToLOALRPlsGZ3.ZVnCDqHFiPtAfFwySHfFJzLdSYpt >= sOfnIWrJUVZLKGwjbMVYbxQURhm2.qhbVlQdJEMjIAOqNoKLNpDVsDGTH)
			{
				return jOkaserkmLOgCqlToLOALRPlsGZ3.ZVnCDqHFiPtAfFwySHfFJzLdSYpt <= sOfnIWrJUVZLKGwjbMVYbxQURhm2.zpAMXPEwDJqbsIfMfXKdCsftqNb;
			}
			return false;
		}
	}

	private class mLuLrAZMjBYyItYPrKQXwKbpTqb
	{
		private bool DXeHglkuHgVqrIunuitAqwSweDQ;

		private bool iHikbafSQwGmmHAYjyPdFIgmLfXN;

		private bool dsAHwvuwapUuUARoApxOoBXuAcZ;

		private int JSSjHCwOvLfQVlVoWeayhmHyBcmH = 10;

		private readonly float CCxeYIixFGRIIGBKrNpMzzicxhON;

		private double VspcJlrbKFYbPLKvIEsiGHAnyudQ;

		public bool VNivDJsgTJIPJyuRbhgsbHlZHTe
		{
			get
			{
				return DXeHglkuHgVqrIunuitAqwSweDQ;
			}
			set
			{
				if (value != DXeHglkuHgVqrIunuitAqwSweDQ)
				{
					XWVlaJLmDpxFzHjWhFlcDMSBaVuA(true);
				}
			}
		}

		public bool ylYNlIRcDzAiHAHXfLpZuEixdDAj => iHikbafSQwGmmHAYjyPdFIgmLfXN;

		public bool TJCoydTzRNpklaYiTkckYQawGIS
		{
			get
			{
				return dsAHwvuwapUuUARoApxOoBXuAcZ;
			}
			set
			{
				if (dsAHwvuwapUuUARoApxOoBXuAcZ != value)
				{
					dsAHwvuwapUuUARoApxOoBXuAcZ = value;
					XWVlaJLmDpxFzHjWhFlcDMSBaVuA(true);
				}
			}
		}

		public int biJErTcaMqxcmMUBbZlfSpnsGjtE => JSSjHCwOvLfQVlVoWeayhmHyBcmH;

		public mLuLrAZMjBYyItYPrKQXwKbpTqb(bool enabled, float refreshInterval)
		{
			DXeHglkuHgVqrIunuitAqwSweDQ = enabled;
			CCxeYIixFGRIIGBKrNpMzzicxhON = refreshInterval;
			XWVlaJLmDpxFzHjWhFlcDMSBaVuA(false);
		}

		public void EBZMKoSknSfzkSfokUzktanzxJf()
		{
			if (DXeHglkuHgVqrIunuitAqwSweDQ && !(ReInput.realTime < VspcJlrbKFYbPLKvIEsiGHAnyudQ))
			{
				XWVlaJLmDpxFzHjWhFlcDMSBaVuA(true);
			}
		}

		private void XWVlaJLmDpxFzHjWhFlcDMSBaVuA(bool P_0)
		{
			if (dsAHwvuwapUuUARoApxOoBXuAcZ)
			{
				FzngAIhKGFOAkXUDRNTZlbDTVEc.xNesvWqvRluogBemhiJbDmeejhy(112u, 0u, ref JSSjHCwOvLfQVlVoWeayhmHyBcmH, 0u);
			}
			iHikbafSQwGmmHAYjyPdFIgmLfXN = FzngAIhKGFOAkXUDRNTZlbDTVEc.aFBzZPIgseVWaecAIaECHLpqHh(VEdhoLaqZqTiAlYgElsfdGsPTuKQ.SckHEOaaQajxifqSPfDQjhOeqJgG) > 0;
			if (P_0)
			{
				VspcJlrbKFYbPLKvIEsiGHAnyudQ = ReInput.realTime + (double)CCxeYIixFGRIIGBKrNpMzzicxhON;
			}
		}
	}

	private const int gFbPpQIazJtbGutnGIcgOgioJLZ = 5;

	private const int sngaKDHDLyCMkFepqKYRdXSpMZJi = 4;

	private const bool ontHhrvQIvSTghbubIeNGZfJbi = true;

	private const float WybymPfjPHEZweZIDwfLRpkZlPb = 2f;

	private readonly object QnjPDsavPpORFdRFTiPBJdcwCnOc = new object();

	private UpdateLoopDataSet<RoCRJTuNbiwgmxLQvuZMdDpIZVa> uWFNPnNCyvNGhsbdEcSfiNPOhORz;

	private HardwareControllerMap_Game sJSDCsgTzLXPDeYdpaIPQRLscSKQ;

	private mLuLrAZMjBYyItYPrKQXwKbpTqb NMqFElLwMmIyMxaViaLtiFaOcndI;

	private bool LYxRDDNdamSvSMBeWWmuRJkYcxA;

	private int hcpDYmtILRKMbTpgHCDyCCPqChL;

	private bool jpnIPbpqmlecdiNqaFAxiNCsiMxs;

	public InputSource inputSource => InputSource.RawInput;

	public HardwareControllerMap_Game hardwareMap
	{
		get
		{
			if (sJSDCsgTzLXPDeYdpaIPQRLscSKQ == null)
			{
				sJSDCsgTzLXPDeYdpaIPQRLscSKQ = knzljgRNjcKvhfxVmMiOjJypPea();
			}
			return sJSDCsgTzLXPDeYdpaIPQRLscSKQ;
		}
	}

	public int buttonCount => 5;

	public int axisCount => 4;

	public Vector2 mousePosition => ThreadSafeUnityInput.mouse.mousePosition;

	public Controller.Extension controllerExtension => null;

	public XDeDuePBuHGGFsspnAzWcBdsCZTB(UpdateLoopSetting updateLoopSetting)
	{
		GNPNKHAnuWEZNzmTFcerCKNaWEv();
		NMqFElLwMmIyMxaViaLtiFaOcndI = new mLuLrAZMjBYyItYPrKQXwKbpTqb(enabled: true, 2f);
		uWFNPnNCyvNGhsbdEcSfiNPOhORz = new UpdateLoopDataSet<RoCRJTuNbiwgmxLQvuZMdDpIZVa>(updateLoopSetting);
		using (TempListPool.TList<UpdateLoopType> tList = TempListPool.GetTList<UpdateLoopType>(3))
		{
			List<UpdateLoopType> list = tList.list;
			EnumConverter.ToUpdateLoopTypes(updateLoopSetting, list);
			for (int i = 0; i < list.Count; i++)
			{
				uWFNPnNCyvNGhsbdEcSfiNPOhORz[i] = new RoCRJTuNbiwgmxLQvuZMdDpIZVa(NMqFElLwMmIyMxaViaLtiFaOcndI, list[i]);
			}
		}
		LYxRDDNdamSvSMBeWWmuRJkYcxA = ReInput.IsInputAllowed(ControllerType.Mouse);
		ReInput.ApplicationFocusChangedEvent += UwyorDvIWzXQBkzFUOYiPtXNewU;
		ThreadSafeUnityInput.mouse.Monitor(state: true);
		ReInput.EditorPauseChangedEvent += FoGJrdVhRFJXGtnwGtshsbWOxVL;
		ReInput.TimeScalePauseChangedEvent += hNMUQdFkaBMDdEhbgIFpgIJjTmFJ;
		ReInput.UpdateEndedEvent += omilOcNkEThsOcELZzuoCnYZNdun;
	}

	public void EBZMKoSknSfzkSfokUzktanzxJf(UpdateLoopType P_0)
	{
		uWFNPnNCyvNGhsbdEcSfiNPOhORz.SetUpdateLoop(P_0);
		NMqFElLwMmIyMxaViaLtiFaOcndI.EBZMKoSknSfzkSfokUzktanzxJf();
		LYxRDDNdamSvSMBeWWmuRJkYcxA = ReInput.IsInputAllowed(ControllerType.Mouse);
	}

	public void kcpIBCdrZEFAOcZMterMlSZVafR(MYwKmedBLcNvIZZHCnRMIWoJnsa P_0)
	{
		if (!LYxRDDNdamSvSMBeWWmuRJkYcxA)
		{
			return;
		}
		lock (QnjPDsavPpORFdRFTiPBJdcwCnOc)
		{
			int count = uWFNPnNCyvNGhsbdEcSfiNPOhORz.Count;
			for (int i = 0; i < count; i++)
			{
				uWFNPnNCyvNGhsbdEcSfiNPOhORz[i].NWlacreQZdPelbINrpysXKCfkWG(P_0);
			}
		}
	}

	public void lniiWJwGWtadnDScpppWlpTlmzW(bool P_0)
	{
		zDUpyKKwWAXjPYuQzBULtEuvGDM();
	}

	public void MlHrxkPdRhzTRtMsoFxLakiJNnhv(bool P_0)
	{
		int num = GNPNKHAnuWEZNzmTFcerCKNaWEv();
		if (num < 0)
		{
			zDUpyKKwWAXjPYuQzBULtEuvGDM();
		}
	}

	private int GNPNKHAnuWEZNzmTFcerCKNaWEv()
	{
		int num = hcpDYmtILRKMbTpgHCDyCCPqChL;
		if (RsVeIRZnmCozInvuVtbXAPKPjeyA.yOGBVwgQmTPAYhDSekCIUhJNbFUc(ZLCskcBqtJByBhszckujrsvBGnPh.QxDaIeQFcOJvuQfaIwlsuKcvYjM, out var num2))
		{
			hcpDYmtILRKMbTpgHCDyCCPqChL = num2;
		}
		else
		{
			hcpDYmtILRKMbTpgHCDyCCPqChL = ((FzngAIhKGFOAkXUDRNTZlbDTVEc.aFBzZPIgseVWaecAIaECHLpqHh(VEdhoLaqZqTiAlYgElsfdGsPTuKQ.gKeTtjWbykJEzizRTIKJqcwIeYO) != 0) ? 1 : 0);
		}
		return hcpDYmtILRKMbTpgHCDyCCPqChL - num;
	}

	private void UwyorDvIWzXQBkzFUOYiPtXNewU(bool P_0)
	{
		LYxRDDNdamSvSMBeWWmuRJkYcxA = ReInput.IsInputAllowed(ControllerType.Mouse);
		if (!P_0 && !LYxRDDNdamSvSMBeWWmuRJkYcxA)
		{
			zDUpyKKwWAXjPYuQzBULtEuvGDM();
		}
	}

	private void FoGJrdVhRFJXGtnwGtshsbWOxVL(bool P_0)
	{
	}

	private void hNMUQdFkaBMDdEhbgIFpgIJjTmFJ(bool P_0)
	{
		if ((ReInput.configVars.updateLoop & UpdateLoopSetting.FixedUpdate) == 0)
		{
			return;
		}
		LYxRDDNdamSvSMBeWWmuRJkYcxA = ReInput.IsInputAllowed(ControllerType.Mouse);
		lock (QnjPDsavPpORFdRFTiPBJdcwCnOc)
		{
			uWFNPnNCyvNGhsbdEcSfiNPOhORz[uWFNPnNCyvNGhsbdEcSfiNPOhORz.fixedUpdateSetIndex].XbSFMNDXmTMOXsWDUqUGHdINhla();
		}
	}

	private void omilOcNkEThsOcELZzuoCnYZNdun(UpdateLoopType P_0)
	{
		lock (QnjPDsavPpORFdRFTiPBJdcwCnOc)
		{
			uWFNPnNCyvNGhsbdEcSfiNPOhORz.Get(P_0).aWoeUUEECkNImBpxjMjDHgymWpn();
		}
	}

	private void zDUpyKKwWAXjPYuQzBULtEuvGDM()
	{
		lock (QnjPDsavPpORFdRFTiPBJdcwCnOc)
		{
			int count = uWFNPnNCyvNGhsbdEcSfiNPOhORz.Count;
			for (int i = 0; i < count; i++)
			{
				uWFNPnNCyvNGhsbdEcSfiNPOhORz[i].OeUrnnZKFEfcUxLGqEbSdcenXWX();
			}
		}
	}

	public void UpdateInputData(ControllerDataUpdater dataUpdater)
	{
		uWFNPnNCyvNGhsbdEcSfiNPOhORz.Current.AqSHUwrsGAehycDXTjkPSOPFauPD(dataUpdater);
	}

	public void Clear()
	{
		zDUpyKKwWAXjPYuQzBULtEuvGDM();
	}

	private HardwareControllerMap_Game knzljgRNjcKvhfxVmMiOjJypPea()
	{
		ControllerElementIdentifier[] array = new ControllerElementIdentifier[Consts.rawInputUnifiedMouseElementIdentifiers.Count];
		for (int i = 0; i < array.Length; i++)
		{
			array[i] = new ControllerElementIdentifier(Consts.rawInputUnifiedMouseElementIdentifiers[i]);
		}
		int[] array2 = new int[5];
		int[] array3 = new int[4];
		int num = 0;
		int num2 = 0;
		for (int j = 0; j < array.Length; j++)
		{
			if (array[j].elementType == ControllerElementType.Axis)
			{
				array3[num2++] = array[j].id;
			}
			else if (array[j].elementType == ControllerElementType.Button)
			{
				array2[num++] = array[j].id;
			}
		}
		AxisCalibrationData[] array4 = new AxisCalibrationData[4];
		AxisRange[] array5 = new AxisRange[4];
		HardwareAxisInfo[] array6 = new HardwareAxisInfo[4];
		HardwareButtonInfo[] array7 = new HardwareButtonInfo[5];
		for (int k = 0; k < 4; k++)
		{
			ref AxisCalibrationData reference = ref array4[k];
			reference = AxisCalibrationData.Raw;
			array5[k] = AxisRange.Full;
			float pollingDeadZone;
			switch (k)
			{
			case 0:
			case 1:
				pollingDeadZone = 100f;
				break;
			default:
				pollingDeadZone = 2f;
				break;
			}
			array6[k] = new HardwareAxisInfo(AxisCoordinateMode.Relative, excludeFromPolling: false, pollingDeadZone, SpecialAxisType.None);
		}
		for (int l = 0; l < 5; l++)
		{
			array7[l] = new HardwareButtonInfo();
		}
		return new HardwareControllerMap_Game("Mouse", default(HardwareControllerMapIdentifier), array, array2, array3, array4, array5, array6, array7, null);
	}

	public void Dispose()
	{
		PMzamCeIIFqnzgwGlxEbIeTHBFUL(true);
		GC.SuppressFinalize(this);
	}

	~XDeDuePBuHGGFsspnAzWcBdsCZTB()
	{
		PMzamCeIIFqnzgwGlxEbIeTHBFUL(false);
	}

	protected virtual void PMzamCeIIFqnzgwGlxEbIeTHBFUL(bool P_0)
	{
		if (!jpnIPbpqmlecdiNqaFAxiNCsiMxs)
		{
			ReInput.ApplicationFocusChangedEvent -= UwyorDvIWzXQBkzFUOYiPtXNewU;
			ReInput.EditorPauseChangedEvent -= FoGJrdVhRFJXGtnwGtshsbWOxVL;
			ReInput.TimeScalePauseChangedEvent -= hNMUQdFkaBMDdEhbgIFpgIJjTmFJ;
			ReInput.UpdateEndedEvent -= omilOcNkEThsOcELZzuoCnYZNdun;
			if (P_0)
			{
				ThreadSafeUnityInput.mouse.Monitor(state: false);
			}
			jpnIPbpqmlecdiNqaFAxiNCsiMxs = true;
		}
	}
}
