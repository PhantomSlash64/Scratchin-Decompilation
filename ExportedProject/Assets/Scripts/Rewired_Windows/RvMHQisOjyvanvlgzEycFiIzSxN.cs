using System;
using System.Collections.Generic;
using System.Text;
using Rewired;
using Rewired.Utils.Attributes;

internal class RvMHQisOjyvanvlgzEycFiIzSxN
{
	private static readonly RfxKZyetXxToAWAzQvGHXLJrcpQf tBbnbXzCneJwJLuDRilSJSfGSRA;

	private static IntPtr PhqOmYNMUjEfhxhNKBoIWVGwvGt;

	private static bool AfCCPjBErKEyXwQckcizCkPvOOAp;

	private static IntPtr oFasuiAYYuaZQeiMaBZytviqbVN;

	private static bool iEaMbGOwdQdlKffNjHXLiXPLgkt;

	public static event Action<rqqboATdKanXVBANwiRWmVDCWLd, double> ZpeABHKRNsJUGIkdLqkIcOgjkINj;

	public static event Action<AcUaPQzGWdWYaglJmWnskdiCgNK, double> SkWKXsPByreWkfIZphOgCdACJDv;

	public static event Action<arqwvMUuunLbDqdcqHYDaxGWWsC, double> gliAULEhtyLvundYTBKaYhdMYjkP;

	public static event Action<IntPtr> cnPtxUsrfEsgVOLONDxTccaVcpp;

	public static event Action znXDINUcaSpSLBQsoaQnnXtWxYE;

	static RvMHQisOjyvanvlgzEycFiIzSxN()
	{
		tBbnbXzCneJwJLuDRilSJSfGSRA = FIfrRxulAJbEPMZezWjIEInngCc;
	}

	public static void OANGfGCqzCDTJYxXyCguRviSeSLQ(IntPtr P_0, bool P_1)
	{
		AfCCPjBErKEyXwQckcizCkPvOOAp = P_1;
		if (!(P_0 == IntPtr.Zero) && !(P_0 == PhqOmYNMUjEfhxhNKBoIWVGwvGt))
		{
			PhqOmYNMUjEfhxhNKBoIWVGwvGt = P_0;
			iEaMbGOwdQdlKffNjHXLiXPLgkt = true;
		}
	}

	public static void cWquWjOBHQFVGgHHXmdhvCIMcrN(bool P_0)
	{
		AfCCPjBErKEyXwQckcizCkPvOOAp = P_0;
	}

	public static RfxKZyetXxToAWAzQvGHXLJrcpQf fSGilUBupDgqsHmMHIijyhrAWjK()
	{
		return tBbnbXzCneJwJLuDRilSJSfGSRA;
	}

	public unsafe static List<fdBZRDbybZMtjAcgxmMymPFpolh> lpdhCcAesAIzAGEfNnVRtTZgAQra(bool P_0)
	{
		int num = 0;
		cZEAfFusPwtBncvnGcfLrVnBtky.BltnqxmiIvdSyCqPYnANAHSIvHzq(null, ref num, WdABqngzfChtFJSJGeObIpoDQOet.BSrOqfyRTTNMvjOTEoJRNXUWoPI<XejzeUvgutfbSkwWeQaFpJwCZEW>());
		if (num == 0)
		{
			return null;
		}
		XejzeUvgutfbSkwWeQaFpJwCZEW[] array = new XejzeUvgutfbSkwWeQaFpJwCZEW[num];
		cZEAfFusPwtBncvnGcfLrVnBtky.BltnqxmiIvdSyCqPYnANAHSIvHzq(array, ref num, WdABqngzfChtFJSJGeObIpoDQOet.BSrOqfyRTTNMvjOTEoJRNXUWoPI<XejzeUvgutfbSkwWeQaFpJwCZEW>());
		string[] array2 = new string[num];
		int num2 = 0;
		int num3 = 0;
		List<fdBZRDbybZMtjAcgxmMymPFpolh> list = new List<fdBZRDbybZMtjAcgxmMymPFpolh>();
		for (int i = 0; i < num; i++)
		{
			bool flag = false;
			IntPtr vhBTBMdAFpqaWuODnxKAnlMulqD = array[i].VhBTBMdAFpqaWuODnxKAnlMulqD;
			int num4 = 0;
			cZEAfFusPwtBncvnGcfLrVnBtky.hjcQwblPdzEbaTqLtBnrbTrCilj(vhBTBMdAFpqaWuODnxKAnlMulqD, lpgIqBFTWuIztCWtjjIgfcnwVpA.dwXOCjlGTMEtQuFitVyMfqHPogm, IntPtr.Zero, ref num4);
			if (num4 == 0)
			{
				flag = true;
			}
			char* ptr = stackalloc char[num4];
			cZEAfFusPwtBncvnGcfLrVnBtky.hjcQwblPdzEbaTqLtBnrbTrCilj(vhBTBMdAFpqaWuODnxKAnlMulqD, lpgIqBFTWuIztCWtjjIgfcnwVpA.dwXOCjlGTMEtQuFitVyMfqHPogm, (IntPtr)ptr, ref num4);
			int length = ((num4 > 0) ? (num4 - 1) : 0);
			string text = new string(ptr, 0, length);
			if (text.Length == 0)
			{
				text = string.Empty;
			}
			byte[] bytes = Encoding.UTF8.GetBytes(text);
			int num5 = 0;
			for (int j = 0; j < bytes.Length; j++)
			{
				if (bytes[j] != 0)
				{
					num5++;
				}
			}
			if (num5 != bytes.Length)
			{
				if (num5 == 0)
				{
					text = string.Empty;
				}
				else
				{
					byte[] array3 = new byte[num5];
					int num6 = 0;
					for (int k = 0; k < bytes.Length; k++)
					{
						if (bytes[k] != 0)
						{
							array3[num6] = bytes[k];
							num6++;
						}
					}
					text = Encoding.UTF8.GetString(array3);
				}
			}
			if (!string.IsNullOrEmpty(text))
			{
				bool flag2 = false;
				for (int l = 0; l < num; l++)
				{
					if (!string.IsNullOrEmpty(array2[l]) && string.Equals(array2[l], text, StringComparison.OrdinalIgnoreCase))
					{
						flag2 = true;
						break;
					}
				}
				if (flag2)
				{
					continue;
				}
			}
			array2[i] = text;
			int num7 = 0;
			int num8 = cZEAfFusPwtBncvnGcfLrVnBtky.hjcQwblPdzEbaTqLtBnrbTrCilj(vhBTBMdAFpqaWuODnxKAnlMulqD, lpgIqBFTWuIztCWtjjIgfcnwVpA.XJZVwRYqmzWKUzForhiqBEJJVZm, IntPtr.Zero, ref num7);
			if (num7 == 0)
			{
				if (flag)
				{
					num3++;
				}
				continue;
			}
			byte* ptr2 = stackalloc byte[(int)(uint)num7];
			*(int*)ptr2 = num7;
			num8 = cZEAfFusPwtBncvnGcfLrVnBtky.hjcQwblPdzEbaTqLtBnrbTrCilj(vhBTBMdAFpqaWuODnxKAnlMulqD, lpgIqBFTWuIztCWtjjIgfcnwVpA.XJZVwRYqmzWKUzForhiqBEJJVZm, (IntPtr)ptr2, ref num7);
			if (num8 >= 0)
			{
				try
				{
					vVQLmLaBCsCDuCoyfffTHKgYEAE vVQLmLaBCsCDuCoyfffTHKgYEAE2 = *(vVQLmLaBCsCDuCoyfffTHKgYEAE*)ptr2;
					fdBZRDbybZMtjAcgxmMymPFpolh item = fdBZRDbybZMtjAcgxmMymPFpolh.UrFNEnWfGrDSrGJtbHCtCHBSfzq(ref vVQLmLaBCsCDuCoyfffTHKgYEAE2, text, vhBTBMdAFpqaWuODnxKAnlMulqD);
					list.Add(item);
				}
				catch (Exception)
				{
					throw;
				}
				num2++;
			}
		}
		if (P_0 && num2 == 0 && num3 > 0)
		{
			Exception ex2 = new Exception("Possible sandbox detected.");
			ex2.Data.Add(1, "sandbox");
			throw ex2;
		}
		return list;
	}

	public static void WmcAFiXIcgzudeMuZFkSiTIyezSz(zUcsEXgRrpTTuylslYMZNHbGVwI P_0, QZaHVGYkaaUvpuhZHPmbaNhDycJ P_1, jsjfPGYHvJosyLMTZZuHNbEmlut P_2, IntPtr P_3)
	{
		PeMGMZlAhscarKIvLgYFgdnrHXxt[] array = new PeMGMZlAhscarKIvLgYFgdnrHXxt[1];
		array[0].YxVFJDmgAkRgCcCvUfhmITfzYBad = (short)P_0;
		array[0].MNRaihHKuqDsUzvPGSYEtAEmyqK = (short)P_1;
		array[0].jMbdrySazXGxqBoUZJERaOtVVTv = (int)P_2;
		array[0].KAKTuIuNEBRZqzhZxRcoMnBKJbR = P_3;
		cZEAfFusPwtBncvnGcfLrVnBtky.gmzeXFIHMSFAmcuWLaLdGUEIMEd(array, 1, WdABqngzfChtFJSJGeObIpoDQOet.BSrOqfyRTTNMvjOTEoJRNXUWoPI<PeMGMZlAhscarKIvLgYFgdnrHXxt>());
	}

	public static void jJQQTqnRxKlreJHDbdGXKirRlUT(zUcsEXgRrpTTuylslYMZNHbGVwI P_0, QZaHVGYkaaUvpuhZHPmbaNhDycJ P_1)
	{
		PeMGMZlAhscarKIvLgYFgdnrHXxt[] array = new PeMGMZlAhscarKIvLgYFgdnrHXxt[1];
		array[0].YxVFJDmgAkRgCcCvUfhmITfzYBad = (short)P_0;
		array[0].MNRaihHKuqDsUzvPGSYEtAEmyqK = (short)P_1;
		array[0].jMbdrySazXGxqBoUZJERaOtVVTv = 1;
		array[0].KAKTuIuNEBRZqzhZxRcoMnBKJbR = IntPtr.Zero;
		cZEAfFusPwtBncvnGcfLrVnBtky.gmzeXFIHMSFAmcuWLaLdGUEIMEd(array, 1, WdABqngzfChtFJSJGeObIpoDQOet.BSrOqfyRTTNMvjOTEoJRNXUWoPI<PeMGMZlAhscarKIvLgYFgdnrHXxt>());
	}

	internal static void xZveeqhZWQBoifJNrEKvhlbeSAk()
	{
		RvMHQisOjyvanvlgzEycFiIzSxN.ZpeABHKRNsJUGIkdLqkIcOgjkINj = null;
		RvMHQisOjyvanvlgzEycFiIzSxN.SkWKXsPByreWkfIZphOgCdACJDv = null;
		RvMHQisOjyvanvlgzEycFiIzSxN.gliAULEhtyLvundYTBKaYhdMYjkP = null;
		PhqOmYNMUjEfhxhNKBoIWVGwvGt = IntPtr.Zero;
		AfCCPjBErKEyXwQckcizCkPvOOAp = false;
		oFasuiAYYuaZQeiMaBZytviqbVN = IntPtr.Zero;
		iEaMbGOwdQdlKffNjHXLiXPLgkt = false;
	}

	public unsafe static void uFpRTYwDSouNMjSqEjshWsUqkVN(IntPtr P_0, double P_1)
	{
		int num = 0;
		cZEAfFusPwtBncvnGcfLrVnBtky.oDlzLWyoHhBFXoZknryyuHsAFHy(P_0, gvVCzqztFUYVppmWLPrjTZfMdMq.mWWWSFqRcGdKnlNbnAYYHmDNKVmB, IntPtr.Zero, ref num, WdABqngzfChtFJSJGeObIpoDQOet.BSrOqfyRTTNMvjOTEoJRNXUWoPI<fTNAFkLJXHrdBqOqAgHusgaZBjB>());
		if (num == 0)
		{
			return;
		}
		byte* ptr = stackalloc byte[(int)(uint)num];
		cZEAfFusPwtBncvnGcfLrVnBtky.oDlzLWyoHhBFXoZknryyuHsAFHy(P_0, gvVCzqztFUYVppmWLPrjTZfMdMq.mWWWSFqRcGdKnlNbnAYYHmDNKVmB, (IntPtr)ptr, ref num, WdABqngzfChtFJSJGeObIpoDQOet.BSrOqfyRTTNMvjOTEoJRNXUWoPI<fTNAFkLJXHrdBqOqAgHusgaZBjB>());
		lOjRmNhcRhwonUCOQXiLfgRvAbT* ptr2 = (lOjRmNhcRhwonUCOQXiLfgRvAbT*)ptr;
		switch (ptr2->wCEAvStPOQNPByHieIfLAPImqVH.HmQyuofUsvomGjtCuiqveOpNWlh)
		{
		case ZLCskcBqtJByBhszckujrsvBGnPh.QhiUZlGNJdolWUoQUQntAIYIgCni:
			if (RvMHQisOjyvanvlgzEycFiIzSxN.gliAULEhtyLvundYTBKaYhdMYjkP != null)
			{
				arqwvMUuunLbDqdcqHYDaxGWWsC arg = new arqwvMUuunLbDqdcqHYDaxGWWsC(ref *ptr2, QGLaeTPOeSSuDzhYEWsEYDPBwjT.orOuQUycqwRxWtfcJyPlVNWFUFq);
				if (arg.jYuOzlJtihpWwRTDsuTZYrbfQmE)
				{
					RvMHQisOjyvanvlgzEycFiIzSxN.gliAULEhtyLvundYTBKaYhdMYjkP(arg, P_1);
				}
			}
			break;
		case ZLCskcBqtJByBhszckujrsvBGnPh.hOKSQsVFahbyPnFtHtuTEPcoMO:
			if (RvMHQisOjyvanvlgzEycFiIzSxN.ZpeABHKRNsJUGIkdLqkIcOgjkINj != null)
			{
				RvMHQisOjyvanvlgzEycFiIzSxN.ZpeABHKRNsJUGIkdLqkIcOgjkINj(new rqqboATdKanXVBANwiRWmVDCWLd(ref *ptr2), P_1);
			}
			break;
		case ZLCskcBqtJByBhszckujrsvBGnPh.QxDaIeQFcOJvuQfaIwlsuKcvYjM:
			if (RvMHQisOjyvanvlgzEycFiIzSxN.SkWKXsPByreWkfIZphOgCdACJDv != null)
			{
				RvMHQisOjyvanvlgzEycFiIzSxN.SkWKXsPByreWkfIZphOgCdACJDv(new AcUaPQzGWdWYaglJmWnskdiCgNK(ref *ptr2), P_1);
			}
			break;
		}
	}

	private static void oXaLHapsUXcFEduSbBzposOwtYbp(IntPtr P_0, IntPtr P_1)
	{
		switch (P_0.ToInt32())
		{
		case 1:
			if (RvMHQisOjyvanvlgzEycFiIzSxN.cnPtxUsrfEsgVOLONDxTccaVcpp != null)
			{
				RvMHQisOjyvanvlgzEycFiIzSxN.cnPtxUsrfEsgVOLONDxTccaVcpp(P_1);
			}
			break;
		case 2:
			if (RvMHQisOjyvanvlgzEycFiIzSxN.znXDINUcaSpSLBQsoaQnnXtWxYE != null)
			{
				RvMHQisOjyvanvlgzEycFiIzSxN.znXDINUcaSpSLBQsoaQnnXtWxYE();
			}
			break;
		}
	}

	[MonoPInvokeCallback(typeof(RfxKZyetXxToAWAzQvGHXLJrcpQf))]
	private static IntPtr FIfrRxulAJbEPMZezWjIEInngCc(IntPtr P_0, uint P_1, IntPtr P_2, IntPtr P_3)
	{
		switch (P_1)
		{
		case 255u:
			uFpRTYwDSouNMjSqEjshWsUqkVN(P_3, ReInput.realTime);
			if (AfCCPjBErKEyXwQckcizCkPvOOAp && blpBkLeFcwWwHrFAULowakyhYZcg.wikLmTMDckfCnLHsfewfHRzwciM(PhqOmYNMUjEfhxhNKBoIWVGwvGt))
			{
				if (iEaMbGOwdQdlKffNjHXLiXPLgkt)
				{
					oFasuiAYYuaZQeiMaBZytviqbVN = blpBkLeFcwWwHrFAULowakyhYZcg.bXplLxoFqlRTkexeZFjbBcnMMNh(PhqOmYNMUjEfhxhNKBoIWVGwvGt, blpBkLeFcwWwHrFAULowakyhYZcg.rGJDppplbkdtGJMnFIEZQZqlOGq.FIfrRxulAJbEPMZezWjIEInngCc);
					iEaMbGOwdQdlKffNjHXLiXPLgkt = false;
				}
				if (oFasuiAYYuaZQeiMaBZytviqbVN != IntPtr.Zero)
				{
					blpBkLeFcwWwHrFAULowakyhYZcg.grFfmlhJZFiHTSgtMLqaOjlYcyn(oFasuiAYYuaZQeiMaBZytviqbVN, PhqOmYNMUjEfhxhNKBoIWVGwvGt, (int)P_1, P_2, P_3);
				}
			}
			break;
		case 254u:
			oXaLHapsUXcFEduSbBzposOwtYbp(P_2, P_3);
			break;
		}
		return IntPtr.Zero;
	}
}
