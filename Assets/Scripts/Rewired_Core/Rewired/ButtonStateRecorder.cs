using Rewired.Utils;

namespace Rewired
{
	[CustomObfuscation(rename = false)]
	internal class ButtonStateRecorder
	{
		private class yRQbWBTNTXdGpfXGWrFEvQpFepUb
		{
			public bool LKGKaxUOLwuJcOsjsDKYSwNaRYh;

			public double iBkNFYlaSimRoLHlzLxVwUKJcwB;

			public void jzPtspnkZAgrKJfuKATzOhURnEB(yRQbWBTNTXdGpfXGWrFEvQpFepUb P_0)
			{
				LKGKaxUOLwuJcOsjsDKYSwNaRYh = P_0.LKGKaxUOLwuJcOsjsDKYSwNaRYh;
				iBkNFYlaSimRoLHlzLxVwUKJcwB = P_0.iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}

			public void skeOSBSqSPGPnIZySfEhxuCHbTXM()
			{
				LKGKaxUOLwuJcOsjsDKYSwNaRYh = false;
				iBkNFYlaSimRoLHlzLxVwUKJcwB = 0.0;
			}
		}

		private const int fXKzdVdatFeQXBhUGTFOVDIdLCOe = 3;

		private yRQbWBTNTXdGpfXGWrFEvQpFepUb[] BOUZQgfjcmguYdmiFTTQVpzRKHM;

		private yRQbWBTNTXdGpfXGWrFEvQpFepUb[] QkYSMqGBSSqNRhVCVAZBtthiNDC;

		private int mlpIUrChCBDiZmChehPYwsjVTYU;

		private int POVfAnfhlexkwdJSwKPCOUTtzNx;

		private uint GnQefVEVyGARyXBHzVnFNFVzANT;

		public double bCtgQgKIZQMqKaoCZEovBFxajVIW
		{
			get
			{
				if (!BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
				{
					return 0.0;
				}
				return ReInput.unscaledTime - BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}
		}

		public double cdVnkQiIOdWWtDIVNKPTKlXwzRr
		{
			get
			{
				if (BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
				{
					return 0.0;
				}
				return ReInput.unscaledTime - BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}
		}

		public double OmnDLpXjutzYooluXcseMSQzJpv
		{
			get
			{
				if (BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
				{
					return ReInput.unscaledTime;
				}
				return BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}
		}

		public double XGDIqvxDbuLNASOqByMJKETgGjX
		{
			get
			{
				if (!BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
				{
					return ReInput.unscaledTime;
				}
				return BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}
		}

		public double NTVNvZmAdsHefsIsrWxUeTSdmwR
		{
			get
			{
				if (BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
				{
					return BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;
				}
				return BOUZQgfjcmguYdmiFTTQVpzRKHM[bizUuKLiJwQSMiCdfUHaYazGvH(mlpIUrChCBDiZmChehPYwsjVTYU, 1)].iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}
		}

		public double QTvFKJFDQWcYJftgIDUQZpIOBNCM
		{
			get
			{
				if (!BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
				{
					return BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;
				}
				return BOUZQgfjcmguYdmiFTTQVpzRKHM[bizUuKLiJwQSMiCdfUHaYazGvH(mlpIUrChCBDiZmChehPYwsjVTYU, 1)].iBkNFYlaSimRoLHlzLxVwUKJcwB;
			}
		}

		public double qSDbFEFoGmJeoPBvHjByoKhZKeXN => BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB;

		public ButtonStateRecorder()
		{
			BOUZQgfjcmguYdmiFTTQVpzRKHM = new yRQbWBTNTXdGpfXGWrFEvQpFepUb[3];
			QkYSMqGBSSqNRhVCVAZBtthiNDC = new yRQbWBTNTXdGpfXGWrFEvQpFepUb[3];
			for (int i = 0; i < 3; i++)
			{
				BOUZQgfjcmguYdmiFTTQVpzRKHM[i] = new yRQbWBTNTXdGpfXGWrFEvQpFepUb();
				QkYSMqGBSSqNRhVCVAZBtthiNDC[i] = new yRQbWBTNTXdGpfXGWrFEvQpFepUb();
			}
			mlpIUrChCBDiZmChehPYwsjVTYU = 0;
			POVfAnfhlexkwdJSwKPCOUTtzNx = 0;
		}

		public void mtiNfGzpXHszOwiOIAVYQuMZclV(bool P_0, bool P_1, double P_2)
		{
			bool flag = ((!BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh) ? P_0 : P_1);
			if (BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh == flag)
			{
				if (ReInput.currentFrame == MiscTools.Tick(GnQefVEVyGARyXBHzVnFNFVzANT))
				{
					IQLPZuwmJpiwBPhvBeBihBFZidh();
				}
			}
			else
			{
				IQLPZuwmJpiwBPhvBeBihBFZidh();
				GnQefVEVyGARyXBHzVnFNFVzANT = ReInput.currentFrame;
				mlpIUrChCBDiZmChehPYwsjVTYU = McZVTcpToaeoeYFxyCLNfIoogHQI(mlpIUrChCBDiZmChehPYwsjVTYU, 1);
				BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].LKGKaxUOLwuJcOsjsDKYSwNaRYh = flag;
				BOUZQgfjcmguYdmiFTTQVpzRKHM[mlpIUrChCBDiZmChehPYwsjVTYU].iBkNFYlaSimRoLHlzLxVwUKJcwB = P_2;
			}
		}

		public bool yChIKcUhAwgJsFSlfSAxNTKaPUB(float P_0)
		{
			return yChIKcUhAwgJsFSlfSAxNTKaPUB(BOUZQgfjcmguYdmiFTTQVpzRKHM, mlpIUrChCBDiZmChehPYwsjVTYU, P_0);
		}

		public bool wJGGsxVpfTtwbRKMwUdlRSiVjvm(float P_0)
		{
			return yChIKcUhAwgJsFSlfSAxNTKaPUB(QkYSMqGBSSqNRhVCVAZBtthiNDC, POVfAnfhlexkwdJSwKPCOUTtzNx, P_0);
		}

		private static bool yChIKcUhAwgJsFSlfSAxNTKaPUB(yRQbWBTNTXdGpfXGWrFEvQpFepUb[] P_0, int P_1, float P_2)
		{
			if (P_2 <= 0f)
			{
				return false;
			}
			if (!P_0[P_1].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
			{
				return false;
			}
			int num = bizUuKLiJwQSMiCdfUHaYazGvH(P_1, 2);
			if (!P_0[num].LKGKaxUOLwuJcOsjsDKYSwNaRYh)
			{
				return false;
			}
			if (P_0[P_1].iBkNFYlaSimRoLHlzLxVwUKJcwB - P_0[num].iBkNFYlaSimRoLHlzLxVwUKJcwB <= (double)P_2)
			{
				return true;
			}
			return false;
		}

		private void IQLPZuwmJpiwBPhvBeBihBFZidh()
		{
			if (POVfAnfhlexkwdJSwKPCOUTtzNx != mlpIUrChCBDiZmChehPYwsjVTYU)
			{
				POVfAnfhlexkwdJSwKPCOUTtzNx = mlpIUrChCBDiZmChehPYwsjVTYU;
			}
			for (int i = 0; i < 3; i++)
			{
				QkYSMqGBSSqNRhVCVAZBtthiNDC[i].jzPtspnkZAgrKJfuKATzOhURnEB(BOUZQgfjcmguYdmiFTTQVpzRKHM[i]);
			}
		}

		public void skeOSBSqSPGPnIZySfEhxuCHbTXM()
		{
			mlpIUrChCBDiZmChehPYwsjVTYU = 0;
			POVfAnfhlexkwdJSwKPCOUTtzNx = 0;
			for (int i = 0; i < 3; i++)
			{
				BOUZQgfjcmguYdmiFTTQVpzRKHM[i].skeOSBSqSPGPnIZySfEhxuCHbTXM();
				QkYSMqGBSSqNRhVCVAZBtthiNDC[i].skeOSBSqSPGPnIZySfEhxuCHbTXM();
			}
			GnQefVEVyGARyXBHzVnFNFVzANT = 0u;
		}

		public void mABkHRVnbmKMakXjDxrpLfuwveb(double P_0)
		{
			mtiNfGzpXHszOwiOIAVYQuMZclV(false, false, P_0);
		}

		private static int McZVTcpToaeoeYFxyCLNfIoogHQI(int P_0, int P_1)
		{
			if (P_1 < 0)
			{
				P_1 = 0;
			}
			else if (P_1 > 3)
			{
				P_1 = 3;
			}
			int num = P_0 + P_1;
			if (num >= 3)
			{
				num -= 3;
			}
			return num;
		}

		private static int bizUuKLiJwQSMiCdfUHaYazGvH(int P_0, int P_1)
		{
			if (P_1 < 0)
			{
				P_1 = 0;
			}
			else if (P_1 > 3)
			{
				P_1 = 3;
			}
			int num = P_0 - P_1;
			if (num < 0)
			{
				num += 3;
			}
			return num;
		}
	}
}
